<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Profile</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/stylesheets/student.css" />
    <style>
      h1 {
        font-size: 26px;
        text-align: center;
        margin-bottom: 20px;
        font-weight: bold;
      }
      form {
        margin-bottom: 15px;
      }
      .form-group {
        padding: 10px;
      }
      .form-control {
        border-radius: 6px;
        padding: 8px;
        border: 1px solid #ccc;
      }
      .readonly-text {
        display: block;
        padding: 8px 12px;
        background: #f8f9fa;
        font-weight: bold;
      }
      label {
        font-weight: bold;
        margin-bottom: 5px;
      }
      button {
        width: 98%;
        padding: 12px;
        font-size: 18px;
        border-radius: 6px;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <%- include('./partials/header') %>
      <div id="right">
        <%- include('./partials/right-header') %>
        <form action="/update/profile/<%= founduser._id %>" method="post">
          <h1>Student Profile</h1>
          <div class="form-group">
            <label>First Name:</label>
            <input
              type="text"
              name="firstName"
              class="form-control"
              value="<%= founduser.firstName %>"
            />
          </div>
          <div class="form-group">
            <label>Last Name:</label>
            <input
              type="text"
              name="lastName"
              class="form-control"
              value="<%= founduser.lastName %>"
            />
          </div>
          <div class="form-group">
            <label>Father's Name:</label>
            <input
              type="text"
              name="fatherName"
              class="form-control"
              value="<%= founduser.fatherName %>"
            />
          </div>
          <div class="form-group">
            <label>Email:</label>
            <input
              type="email"
              name="email"
              class="form-control"
              value="<%= founduser.email %>"
            />
          </div>
          <div class="form-group">
            <label>Gender:</label>
            <input
              type="text"
              name="gender"
              class="form-control"
              value="<%= founduser.gender %>"
            />
          </div>
          <div class="form-group">
            <label>Contact Number:</label>
            <input
              type="text"
              name="contactNumber"
              class="form-control"
              value="<%= founduser.contactNumber %>"
            />
          </div>
          <div class="form-group">
            <label>Course:</label>
            <div class="col-md-12">
              <select class="form-select" name="course">
                <option value="">All Courses</option>
                <% courses.forEach(course => { const isSelected = founduser.course.some(c => c._id.toString() === course._id.toString()); %>
                <option value="<%= course._id %>" <%= isSelected ? 'selected' : '' %>>
                <%= course.courseName %>
                </option>
                <% }) %>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Qualification:</label>
            <input
              type="text"
              name="qualification"
              class="form-control"
              value="<%= founduser.qualification %>"
            />
          </div>
          <div class="form-group">
            <label>Address:</label>
            <input
              type="text"
              name="address"
              class="form-control"
              value="<%= founduser.address %>"
            />
          </div>
          <div class="form-group">
            <label>Enquiry Date:</label>
            <span class="readonly-text"
              ><%= founduser.enquiryDate.toDateString() %></span
            >
          </div>
          <div class="form-group">
            <label>Joining Date:</label>
            <span class="readonly-text"
              ><%= founduser?.joiningDate?.toDateString() %></span
            >
          </div>
          <div class="form-group">
            <label>Installment Amount:</label>
            <input
              type="text"
              name="installment"
              class="form-control"
              value="<%= founduser.installment %>"
            />
          </div>
          <div class="form-group">
            <label>Due Amount:</label>
            <input
              type="text"
              name="due"
              class="form-control"
              value="<%= founduser.due %>"
            />
          </div>
          <div class="form-group">
            <label>Registration Payment Method:</label>
            <span class="readonly-text"
              ><%= founduser.registrationPaymentMode %></span
            >
          </div>
          <div class="form-group">
            <label>Registration Payment Status:</label>
            <span class="readonly-text"
              ><%= founduser.registrationPayment %></span
            >
          </div>
           <div class="form-group col-md-3">
            <label>Due Amount Date:</label>
             <input
              type="date"
              name="due"
              class="form-control "
              value="<%= founduser.dueDate %>"
            />
            <!-- <span class="readonly-text"><%= founduser.dueDate %></span> -->
          </div>
          <button class="btn btn-primary mt-3 mx-2">Update</button>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
